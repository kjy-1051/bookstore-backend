📄 docs/api-design.md
과제1 API 설계 반영 및 수정 사항 요약

1. 개요

본 문서는 과제1에서 제출한 API 설계서를 기반으로,
과제2 구현 과정에서 발생한 설계 반영 사항 및 변경/보완 내용을 정리한 문서이다.
과제1 설계의 전체 구조와 방향성은 유지하되,
실제 구현 과정에서 인증/인가, 예외 처리, 통계 API 등을 중심으로 일부 수정이 이루어졌다.

2. 유지된 설계 사항

다음 항목은 과제1 설계와 동일하게 유지되었다.
RESTful API 구조 유지
리소스 단위 엔드포인트 설계
/books
/comments
/ratings
HTTP Method 의미 준수 (GET / POST / PATCH / DELETE)
JWT 기반 인증 방식 채택
USER / ADMIN Role 분리

3. 주요 변경 및 보완 사항

3.1 인증 / 인가 설계 보완

[과제1]
JWT 인증 개념만 정의
Role 기반 접근 제어 개념 수준

[과제2]
Access Token / Refresh Token 분리
JWT Payload에 sub(user_id), role 명시
관리자 전용 API를 /admin/* 경로로 명확히 분리
공통 의존성 기반 RBAC 적용
3.2 관리자 전용 API 분리

[과제1]
관리자 기능이 일반 API에 혼재

[과제2]
/admin/books
/admin/users
/admin/stats
등 관리자 전용 API를 별도 네임스페이스로 분리하여
권한 검증 및 문서화 명확성 개선

3.3 통계 API 추가

과제1 설계에는 없던 통계성 API를 구현 단계에서 추가하였다.
예:
전체 도서 수
전체 사용자 수
댓글 수
평점 수
댓글/평점 기반 TOP N 도서
이는 과제 요구사항 중 “통계 기능” 항목 충족을 위해 추가 설계되었다.

3.4 에러 응답 규격화

[과제1]
HTTP 상태 코드 중심 설계

[과제2]
모든 오류 응답을 공통 JSON 포맷으로 통일
비즈니스 오류 코드(ErrorCode) 도입
Swagger 문서에 오류 응답 예시 명시

4. 설계 변경 요약 표

구분	과제1	과제2
인증	JWT 개념	Access/Refresh 분리
인가	개념적 Role	RBAC 강제 적용
관리자 API	혼재	/admin/* 분리
통계 API	없음	추가 구현
에러 처리	상태 코드 중심	공통 포맷

5. 결론

과제2 구현은 과제1 설계를 기반으로 하되,
실제 서비스 수준에 맞도록 구조를 보완·확장하는 방향으로 진행되었다.
설계 변경은 요구사항 충족 및 유지보수성을 고려한 합리적인 수정이다.